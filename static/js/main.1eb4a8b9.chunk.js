(this["webpackJsonpthe-online-music-store"]=this["webpackJsonpthe-online-music-store"]||[]).push([[0],{39:function(t,e,n){},53:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var c=n(2),s=n.n(c),a=n(31),o=n.n(a),r=(n(39),n(24)),l=n(14),i=n(15),u=n(17),b=n(16),h=n(19),d=n(5),j=n(6),m=n.n(j),p=n(26),x=n(18),O=n.n(x),f=n(25),g=[{albumId:"1",albumName:"The Script",albumArtist:"The Script",onCartCount:0,purchasedCount:0,albumPrice:0,songs:[{title:"We Cry",artist:"The Script",playCount:0},{title:"Before The Worst",artist:"The Script",playCount:0},{title:"Talk You Down",artist:"The Script",playCount:0},{title:"The Man Who Can't Be Moved",artist:"The Script",playCount:0},{title:"Breakeven",artist:"The Script",playCount:0},{title:"Rusty Halo",artist:"The Script",playCount:0},{title:"The End Where I Begin",artist:"The Script",playCount:0},{title:"Fall For Anything",artist:"The Script",playCount:0},{title:"If You See Kay",artist:"The Script",playCount:0},{title:"I'm Yours",artist:"The Script",playCount:0},{title:"Anybody There",artist:"The Script",playCount:0}]},{albumId:"2",albumName:"Science & Faith",albumArtist:"The Script",onCartCount:0,purchasedCount:0,albumPrice:0,songs:[{title:"You Won't Feel A Thing",artist:"The Script",playCount:0},{title:"For The First Time",artist:"The Script",playCount:0},{title:"Nothing",artist:"The Script",playCount:0},{title:"Science & Faith",artist:"The Script",playCount:0},{title:"If You Ever Come Back",artist:"The Script",playCount:0},{title:"Long Gone And Moved On",artist:"The Script",playCount:0},{title:"Dead Man Walking",artist:"The Script",playCount:0},{title:"This = Love",artist:"The Script",playCount:0},{title:"Walk Away",artist:"The Script",playCount:0},{title:"Exit Wounds",artist:"The Script",playCount:0}]}],v=n(32),C=(n(42),n(58),v.a.initializeApp({apiKey:"AIzaSyDjJh5kNPwHGRzRdi_cYnxok7KfTvVfX-g",authDomain:"the-online-music-store.firebaseapp.com",projectId:"the-online-music-store",storageBucket:"the-online-music-store.appspot.com",messagingSenderId:"634983174557",appId:"1:634983174557:web:7330ac724f145ae35b5f74"}).firestore()),y=C.collection("albums"),N=function(){console.log("---- Adding Albums"),g.forEach((function(t,e){t.albumRef=C.doc("albumId/"+(e+1)),t.songs.forEach((function(t,n){t.songId=n+1,t.albumId=e+1})),y.doc(t.albumId).set(t).then((function(){console.log("Document written with ID: ",t.albumId),g.length-1==e&&console.log("-- Done Add")})).catch((function(t){console.error("Error adding document: ",t)}))}))},T=function(){var t=Object(f.a)(O.a.mark((function t(e,n){var c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("---- Deleting Albums"),t.next=3,y.get();case 3:return c=t.sent,s=C.batch(),c.docs.forEach((function(t){s.delete(t.ref),console.log("Document deleted with ID: ",t.id)})),t.next=8,s.commit().then((function(){console.log("-- Done Delete"),n&&N()})).catch((function(t){console.error("Error deleting document: ",t)}));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(f.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("---- Getting Albums"),e=[],t.next=4,y.get().then((function(t){t.forEach((function(t){console.log("Document retrieved with ID: ",t.id);var n=Object.assign({id:t.id},t.data());e.push(n)}))})).catch((function(t){console.error("Error retrieving document: ",t)}));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(f.a)(O.a.mark((function t(){var e,n,c,s,a,o=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:0,n=o.length>1?o[1]:void 0,c=o.length>2?o[2]:void 0,s=o.length>3?o[3]:void 0,a=o.length>4?o[4]:void 0,console.log("---- Update Albums"),c&&(console.log("Update Play Count"),n.songs[e-1].playCount+=1),console.log(s),"inc"===s&&(console.log("Update Cart"),n.onCartCount+=1),"dec"===s&&(console.log("Update Cart"),n.onCartCount-=1),a&&(console.log("Update Purchase"),n.purchasedCount+=1),t.next=13,y.doc(n.albumId).set(n).then((function(){console.log("Document updated with ID: ",n.albumId)})).catch((function(t){console.error("Error updating document: ",t)}));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(f.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("---- Update Batch Albums"),n=C.batch(),e.forEach((function(t,e){y.doc(t.albumId).set(t).then((function(){console.log("Document updated with ID: ",t.albumId)})).catch((function(t){console.error("Error updating document: ",t)}))})),t.next=5,n.commit().then((function(){console.log("-- Done Update Batch Albums")})).catch((function(t){console.error("Error updating batch document: ",t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=n(1),S=function(t){Object(u.a)(n,t);var e=Object(b.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.album,c=e.song,s=e.artist,a=e.isTopTen,o=e.showButtons;return Object(I.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between bg-light",children:[Object(I.jsxs)("span",{className:"p-0",children:[Object(I.jsx)("span",{className:"font-weight-bold",children:n.albumName}),"  ",Object(I.jsx)("span",{className:"text-muted",children:s}),"  ",!a&&Object(I.jsxs)("span",{className:"text-dark",children:["($",n.albumPrice,")"]}),!a&&n.purchasedCount>0&&Object(I.jsxs)("span",{className:"text-success initialism ml-1",children:["PURCHASED (",n.purchasedCount,")"]})]}),Object(I.jsxs)("span",{className:"p-0",children:[Object(I.jsx)(p.a,{className:"mr-2"}),Object(I.jsxs)("span",{className:"text-secondary initialism",children:["(",n.onCartCount,")"]}),o&&Object(I.jsx)("kbd",{className:"text-dark bg-light ml-1",role:"button",onClick:function(){k(c.songId,n,!1,"inc").catch((function(){n.onCartCount-=1})),t.setState({})},children:"Add To Cart"})]})]})}}]),n}(s.a.Component),B=function(t){Object(u.a)(n,t);var e=Object(b.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props,e=t.albums,n=t.isTopTen,c=t.showButtons;return Object(I.jsxs)("div",{className:"text-left m-5",children:[n&&Object(I.jsx)("h5",{children:"Top 10 Best Selling Albums"}),Object(I.jsx)("ul",{className:"list-group",children:e.map((function(t){return Object(I.jsx)(S,{artist:t.albumArtist,album:t,song:t.song,isTopTen:n,showButtons:c},t.albumId)}))})]})}}]),n}(s.a.Component),P=function(t){Object(u.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(l.a)(this,n);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={playCount:0},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.album,c=e.song,s=e.artist,a=e.isTopTen,o=e.showButtons;return this.state.playCount=c.playCount,Object(I.jsxs)("li",{className:"".concat(a?"list-group-item p-2 bg-light":"m-1"," d-flex flex-row justify-content-between"),children:[Object(I.jsxs)("span",{className:"p-0",children:[s," - ",c.title]}),Object(I.jsxs)("span",{className:"p-0",children:[Object(I.jsx)(p.b,{className:"mr-2"}),Object(I.jsxs)("span",{className:"text-secondary initialism",children:["(",this.state.playCount,")"]}),o&&Object(I.jsx)("kbd",{className:"text-dark bg-light ml-1",role:"button",onClick:function(){k(c.songId,n,!0).catch((function(){n.songs[c.songId-1].playCount-=1})),t.setState({})},children:"Play"})]})]})}}]),n}(s.a.Component),D=function(t){Object(u.a)(n,t);var e=Object(b.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props,e=t.albums,n=t.songs,c=t.isTopTen,s=t.showButtons;return Object(I.jsxs)("div",{className:"text-left ".concat(c?"m-5":"m-4"),children:[c&&Object(I.jsx)("h5",{children:"Top 10 Most Played Songs"}),Object(I.jsx)("ul",{className:"list-group",children:n.map((function(t){return Object(I.jsx)(P,{artist:t.artist,album:e[t.albumId-1],song:t,isTopTen:c,showButtons:s},c?t.vId:t.songId)}))})]})}}]),n}(s.a.Component),E=function(t){var e,n=t.albums,c=t.isTopTen,a=t.showButtons;e=m.a.take(m.a.orderBy(n,["onCartCount"],["desc"]),10);var o=[];return m.a.forEach(n,(function(t){o.push(t.songs)})),o=m.a.take(m.a.orderBy(m.a.flatten(o),["playCount"],["desc"]),10),o=m.a.map(o,(function(t,e){return t.vId=e+1,t})),Object(I.jsxs)(s.a.Fragment,{children:[Object(I.jsx)(B,{albums:e,isTopTen:c,showButtons:a}),Object(I.jsx)(D,{albums:n,songs:o,isTopTen:c,showButtons:a})]})},F=function(t){var e=t.albums,n=t.isTopTen,c=t.showButtons;return Object(I.jsx)("div",{className:"p-5",children:e.map((function(t,s){return Object(I.jsxs)("div",{className:"pb-1 mb-5",children:[Object(I.jsx)(S,{artist:t.albumArtist,album:t,song:t.songs,showButtons:c},t.albumId),Object(I.jsx)(D,{albums:e,songs:t.songs,isTopTen:n,showButtons:c})]},t.albumId)}))})},M=function(t){var e=t.albums,n=m.a.filter(e,(function(t){return t.purchasedCount>0}));m.a.forEach(n,(function(t){t.totalPrice=t.purchasedCount*t.albumPrice}));var c=m.a.sumBy(n,"totalPrice");return Object(I.jsxs)("div",{className:"m-5",children:[Object(I.jsx)("h3",{className:"text-dark mb-5",children:"Purchased Albums"}),n.length>0&&Object(I.jsxs)("table",{className:"table table-borderless",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"col",children:"#"}),Object(I.jsx)("th",{scope:"col",children:"Album"}),Object(I.jsx)("th",{scope:"col",children:"Album Artist"}),Object(I.jsx)("th",{scope:"col",children:"Amount"}),Object(I.jsx)("th",{scope:"col",children:"Price"})]})}),Object(I.jsx)("tbody",{children:n.map((function(t,e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"row",children:e}),Object(I.jsx)("td",{children:t.albumName}),Object(I.jsx)("td",{children:t.albumArtist}),Object(I.jsx)("td",{children:t.purchasedCount}),Object(I.jsxs)("td",{children:["$",t.albumPrice]})]},t.albumId)}))}),Object(I.jsx)("tfoot",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsxs)("td",{className:"text-secondary font-weight-bold",children:["Total ($",c,")"]})]})})]}),n.length<1&&Object(I.jsx)("h5",{className:"text-muted mt-5",children:"No purchased albums."}),n.length>0&&Object(I.jsx)("h5",{className:"text-muted mt-5",children:"Thank you for your purchase!"})]})},R=function(t){var e=t.albums,n=t.totalPrice,c=t.closeModal,s=Object(d.g)();return Object(I.jsxs)("div",{className:"cart-modal",children:[" ",Object(I.jsxs)("div",{className:"cart-modal-box bg-light",children:[Object(I.jsxs)("h4",{className:"list-group-item d-flex flex-row justify-content-between bg-white text-dark",children:["Checkout",Object(I.jsxs)("span",{className:"text-secondary font-weight-bold",children:["Total ($",n,")"]})]}),Object(I.jsx)("div",{className:"checkout-table",children:Object(I.jsxs)("table",{className:"table table-borderless",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"col",children:"#"}),Object(I.jsx)("th",{scope:"col",children:"Album"}),Object(I.jsx)("th",{scope:"col",children:"Album Artist"}),Object(I.jsx)("th",{scope:"col",children:"Amount"}),Object(I.jsx)("th",{scope:"col",children:"Price"})]})}),e.length>0&&Object(I.jsx)("tbody",{children:e.map((function(t,e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"row",children:e}),Object(I.jsx)("td",{children:t.albumName}),Object(I.jsx)("td",{children:t.albumArtist}),Object(I.jsx)("td",{children:t.onCartCount}),Object(I.jsxs)("td",{children:["$",t.albumPrice]})]},t.albumId)}))})]})}),Object(I.jsx)("div",{className:"cart-modal-footer",children:Object(I.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(I.jsx)("kbd",{className:"text-light bg-secondary m-3 p-2",role:"button",onClick:function(){c()},children:"Back"}),Object(I.jsx)("kbd",{className:"text-light bg-dark m-3 p-2",role:"button",onClick:function(){m.a.forEach(e,(function(t){t.purchasedCount+=t.onCartCount,t.onCartCount=0})),A(e),c(),s.push("/purchase")},children:"Place Order"})]})})]})]})},U=function(t){var e=Object(c.useState)(t.albums),n=Object(r.a)(e,2),a=n[0],o=n[1],l=Object(c.useState)(!1),i=Object(r.a)(l,2),u=i[0],b=i[1],h=m.a.filter(a,(function(t){return t.onCartCount>0}));m.a.forEach(h,(function(t){t.totalPrice=t.onCartCount*t.albumPrice}));var d=m.a.sumBy(h,"totalPrice"),j=m.a.sumBy(h,"onCartCount");return Object(I.jsxs)(s.a.Fragment,{children:[u&&h.length>0&&Object(I.jsx)(R,{albums:h,totalPrice:d,closeModal:function(){b(!1)}}),Object(I.jsxs)("div",{className:"m-5",children:[Object(I.jsxs)("h3",{className:"text-dark mb-5",children:["My Cart ",j>0&&Object(I.jsxs)("span",{children:["(",j,")"]})]}),h.length>0&&Object(I.jsxs)("table",{className:"table table-borderless",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"col",children:"#"}),Object(I.jsx)("th",{scope:"col",children:"Album"}),Object(I.jsx)("th",{scope:"col",children:"Album Artist"}),Object(I.jsx)("th",{scope:"col",children:"Amount"}),Object(I.jsx)("th",{scope:"col",children:"Price"}),Object(I.jsx)("th",{scope:"col",children:"Option"})]})}),Object(I.jsx)("tbody",{children:h.map((function(t,e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{scope:"row",children:e}),Object(I.jsx)("td",{children:t.albumName}),Object(I.jsx)("td",{children:t.albumArtist}),Object(I.jsx)("td",{children:t.onCartCount}),Object(I.jsxs)("td",{children:["$",t.albumPrice]}),Object(I.jsx)("td",{children:Object(I.jsx)("kbd",{className:"text-secondary bg-light ml-1",role:"button",onClick:function(){k(0,t,!1,"dec").catch((function(){t.onCartCount-=1})),o(h)},children:"Remove"})})]},t.albumId)}))}),Object(I.jsx)("tfoot",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsx)("td",{}),Object(I.jsxs)("td",{className:"text-secondary font-weight-bold",children:["Total ($",d,")"]}),Object(I.jsx)("td",{children:Object(I.jsx)("kbd",{className:"text-info bg-light ml-1",role:"button",onClick:function(){b(!0)},children:"Checkout"})})]})})]}),h.length<1&&Object(I.jsx)("h5",{className:"text-muted mt-5",children:"No albums added to cart."})]})]})},W=function(t){Object(u.a)(n,t);var e=Object(b.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props.albums;return Object(I.jsxs)(h.a,{children:[Object(I.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(I.jsx)(h.b,{to:"/",className:"navbar-brand nav-item nav-link text-decoration-none",children:"The Online Music Store"}),Object(I.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(I.jsx)("span",{className:"navbar-toggler-icon"})}),Object(I.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(I.jsxs)("div",{className:"navbar-nav",children:[Object(I.jsxs)(h.b,{to:"/home",activeClassName:"text-info",className:"nav-item nav-link text-decoration-none",children:["Home ",Object(I.jsx)("span",{className:"sr-only",children:"(current)"})]}),Object(I.jsx)(h.b,{to:"/albums",activeClassName:"text-info",className:"nav-item nav-link text-decoration-none",children:"Albums"}),Object(I.jsx)(h.b,{to:"/purchase",activeClassName:"text-info",className:"nav-item nav-link text-decoration-none",children:"Purchase"}),Object(I.jsx)(h.b,{to:"/cart",activeClassName:"text-info",className:"nav-item nav-link text-decoration-none",children:"Cart"}),Object(I.jsx)("a",{className:"reset-btn nav-item nav-link text-decoration-none text-muted position-absolute mr-5",role:"button",onClick:function(){window.confirm("Reset Firestore Database?\nThese includes play, cart, and purchase counters.\n\nPage will reload shortly.")&&(console.log("---- Initializing Albums"),y.get().then((function(t){t.empty?N():T("albums",!0)})),setTimeout((function(){window.location.reload()}),1e3))},children:"Reset Data"})]})})]}),Object(I.jsxs)(d.d,{children:[Object(I.jsx)(d.b,{path:"/cart",children:Object(I.jsx)(U,{albums:t})}),Object(I.jsx)(d.b,{path:"/purchase",children:Object(I.jsx)(M,{albums:t})}),Object(I.jsx)(d.b,{path:"/albums",children:Object(I.jsx)(F,{albums:t,isTopTen:!1,showButtons:!0})}),Object(I.jsx)(d.b,{exact:!0,path:"/home",children:Object(I.jsx)(E,{albums:t,isTopTen:!0,showButtons:!1})}),Object(I.jsx)(d.b,{exact:!0,path:"/the-online-music-store",children:Object(I.jsx)(d.a,{exact:!0,from:"/the-online-music-store",to:"/home"})}),Object(I.jsx)(d.b,{exact:!0,path:"/",children:Object(I.jsx)(d.a,{exact:!0,from:"/",to:"/home"})})]})]})}}]),n}(s.a.Component),$=(n(53),function(){var t=Object(c.useState)([]),e=Object(r.a)(t,2),n=e[0],s=e[1];return Object(c.useEffect)((function(){w().then((function(t){s(t)}))}),[]),Object(I.jsx)("div",{className:"App",children:!m.a.isEmpty(n)&&Object(I.jsx)(W,{albums:n})})}),Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),s(t),a(t),o(t)}))};n(54),n(55);o.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)($,{})}),document.getElementById("root")),Y()}},[[57,1,2]]]);
//# sourceMappingURL=main.1eb4a8b9.chunk.js.map